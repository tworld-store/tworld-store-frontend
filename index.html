<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <base href="/tworld-store-frontend/">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í‹°ì›”ë“œìŠ¤í† ì–´ - SKT ê³µì‹ ì˜¨ë¼ì¸ìƒµ</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- í—¤ë” -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <span class="logo-text">í‹°ì›”ë“œìŠ¤í† ì–´</span>
                </a>
                <nav class="main-nav">
                    <a href="devices.html?brand=samsung">ì‚¼ì„±</a>
                    <a href="devices.html?brand=apple">ì• í”Œ</a>
                    <a href="devices.html">ì „ì²´ê¸°ê¸°</a>
                    <a href="plans.html">ìš”ê¸ˆì œ</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main>
        <!-- íˆì–´ë¡œ ìŠ¬ë¼ì´ë” ì„¹ì…˜ -->
        <section class="hero-section">
            <div class="hero-slider" id="hero-slider">
                <!-- JSë¡œ ë™ì  ìƒì„± -->
                <div class="slider-loading">ë¡œë”© ì¤‘...</div>
            </div>
            <div class="slider-dots" id="slider-dots">
                <!-- JSë¡œ ë™ì  ìƒì„± -->
            </div>
        </section>

        <!-- ì¸ê¸° ê¸°ê¸° ì„¹ì…˜ -->
        <section class="popular-section">
            <div class="container">
                <h2 class="section-title">ì¸ê¸° ê¸°ê¸°</h2>
                <div class="devices-grid" id="popular-devices">
                    <!-- JSë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </section>

        <!-- ì¤‘ê°„ ë°°ë„ˆ ì„¹ì…˜ -->
        <section class="banner-section">
            <div class="container">
                <div class="middle-banner" id="middle-banner">
                    <!-- JSë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </section>

        <!-- í”„ë¡œëª¨ì…˜ ì„¹ì…˜ -->
        <section class="promo-section">
            <div class="container">
                <div class="promo-grid" id="bottom-promos">
                    <!-- JSë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </section>
    </main>

    <!-- í‘¸í„° -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <p>ê³ ê°ì„¼í„°: 1600-8939</p>
                    <p>ìƒë‹´ì‹œê°„: í‰ì¼ 09:00 - 18:00</p>
                </div>
                <div class="footer-legal">
                    <p>Â© 2025 SKT. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JS íŒŒì¼ ë¡œë“œ -->
    <script src="js/cloudinary.js"></script>
    <script src="js/api.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/common.js"></script>

    <!-- ì¸ë¼ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        /**
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * index.html ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         */

        // Cloudinary ì„¤ì •
        setCloudinaryConfig('tworld-store');

        // ì „ì—­ ë³€ìˆ˜
        let sliderInterval = null;
        let currentSlide = 0;

        /**
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         * í˜ì´ì§€ ì´ˆê¸°í™”
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         */
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                console.log('ğŸš€ index.html ë¡œë“œ ì‹œì‘');
                
                // Calculator ì´ˆê¸°í™”
                await calculator.init();
                console.log('âœ… Calculator ì´ˆê¸°í™” ì™„ë£Œ');
                
                // ëª¨ë“  ì„¹ì…˜ ë Œë”ë§
                await Promise.all([
                    renderHeroSlider(),
                    renderPopularDevices(),
                    renderMiddleBanner(),
                    renderBottomPromos()
                ]);
                
                console.log('âœ… index.html ë¡œë“œ ì™„ë£Œ');
                
            } catch (error) {
                console.error('âŒ í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        });

        /**
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         * íˆì–´ë¡œ ìŠ¬ë¼ì´ë” ë Œë”ë§
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         */
        async function renderHeroSlider() {
            const container = document.getElementById('hero-slider');
            const dotsContainer = document.getElementById('slider-dots');
            
            // Placeholder ìŠ¬ë¼ì´ë“œ 3ê°œ
            const slides = [
                {
                    url: 'https://via.placeholder.com/1200x500/3617CE/ffffff?text=í”„ë¡œëª¨ì…˜+ë°°ë„ˆ+1',
                    alt: 'í”„ë¡œëª¨ì…˜ 1',
                    link: '#'
                },
                {
                    url: 'https://via.placeholder.com/1200x500/2910A3/ffffff?text=í”„ë¡œëª¨ì…˜+ë°°ë„ˆ+2',
                    alt: 'í”„ë¡œëª¨ì…˜ 2',
                    link: '#'
                },
                {
                    url: 'https://via.placeholder.com/1200x500/4E2EE8/ffffff?text=í”„ë¡œëª¨ì…˜+ë°°ë„ˆ+3',
                    alt: 'í”„ë¡œëª¨ì…˜ 3',
                    link: '#'
                }
            ];
            
            // ìŠ¬ë¼ì´ë“œ ìƒì„±
            container.innerHTML = '';
            slides.forEach((slide, index) => {
                const slideItem = document.createElement('div');
                slideItem.className = 'slider-item' + (index === 0 ? ' active' : '');
                slideItem.innerHTML = `
                    <a href="${slide.link}">
                        <img src="${slide.url}" alt="${slide.alt}" loading="${index === 0 ? 'eager' : 'lazy'}">
                    </a>
                `;
                container.appendChild(slideItem);
            });
            
            // ë„íŠ¸ ìƒì„±
            dotsContainer.innerHTML = '';
            slides.forEach((_, index) => {
                const dot = document.createElement('button');
                dot.className = 'slider-dot' + (index === 0 ? ' active' : '');
                dot.onclick = () => goToSlide(index);
                dotsContainer.appendChild(dot);
            });
            
            // ìë™ ì¬ìƒ ì‹œì‘
            startAutoPlay();
        }

        /**
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         * ìŠ¬ë¼ì´ë“œ ì´ë™
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         */
        function goToSlide(index) {
            const slides = document.querySelectorAll('.slider-item');
            const dots = document.querySelectorAll('.slider-dot');
            
            // í˜„ì¬ ìŠ¬ë¼ì´ë“œ ë¹„í™œì„±í™”
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            // ìƒˆ ìŠ¬ë¼ì´ë“œ í™œì„±í™”
            currentSlide = index;
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        /**
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         * ìë™ ì¬ìƒ
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         */
        function startAutoPlay() {
            // ê¸°ì¡´ interval ì œê±°
            if (sliderInterval) {
                clearInterval(sliderInterval);
            }
            
            // 5ì´ˆë§ˆë‹¤ ë‹¤ìŒ ìŠ¬ë¼ì´ë“œ
            sliderInterval = setInterval(() => {
                const slides = document.querySelectorAll('.slider-item');
                const nextSlide = (currentSlide + 1) % slides.length;
                goToSlide(nextSlide);
            }, 5000);
        }

        /**
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         * ì¸ê¸° ê¸°ê¸° ë Œë”ë§
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         */
        async function renderPopularDevices() {
            const container = document.getElementById('popular-devices');
            
            try {
                // ì‹¤ì œ ë°ì´í„° ë¡œë“œ
                const allDevices = await api.getDevices();
                
                // ê° ë¸Œëœë“œì—ì„œ 2~3ê°œì”© ì„ íƒ (ì´ 8ê°œ)
                const samsung = allDevices.filter(d => d.brand === 'ì‚¼ì„±').slice(0, 3);
                const apple = allDevices.filter(d => d.brand === 'ì• í”Œ').slice(0, 3);
                const lg = allDevices.filter(d => d.brand === 'LG').slice(0, 2);
                
                // ëª¨ë¸ë³„ë¡œ ê·¸ë£¹í™” (ì¤‘ë³µ ì œê±°)
                const modelMap = new Map();
                [...samsung, ...apple, ...lg].forEach(device => {
                    if (!modelMap.has(device.model)) {
                        modelMap.set(device.model, device);
                    }
                });
                
                const popularDevices = Array.from(modelMap.values()).slice(0, 8);
                
                container.innerHTML = '';
                
                for (const device of popularDevices) {
                    const card = document.createElement('div');
                    card.className = 'device-card';
                    card.onclick = () => location.href = `device-detail.html?device=${encodeURIComponent(device.model)}`;
                    
                    // Placeholder ì´ë¯¸ì§€ (ë‚˜ì¤‘ì— Cloudinaryë¡œ êµì²´)
                    const imageUrl = `https://via.placeholder.com/400x400/cccccc/333333?text=${encodeURIComponent(device.model)}`;
                    
                    card.innerHTML = `
                        <div class="device-image">
                            <img src="${imageUrl}" 
                                 alt="${device.model}"
                                 loading="lazy">
                        </div>
                        <div class="device-info">
                            <h3 class="device-title">${device.model}</h3>
                            <p class="device-subtitle">${device.storage}GB Â· ${device.color.name}</p>
                            <p class="device-price">ì›” ${formatPrice(Math.round(device.price / 24))}</p>
                        </div>
                    `;
                    
                    container.appendChild(card);
                }
                
                console.log(`âœ… ì¸ê¸° ê¸°ê¸° ${popularDevices.length}ê°œ ë Œë”ë§ ì™„ë£Œ`);
                
            } catch (error) {
                console.error('âŒ ì¸ê¸° ê¸°ê¸° ë Œë”ë§ ì‹¤íŒ¨:', error);
                container.innerHTML = '<p class="error-message">ê¸°ê¸°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
            }
        }

        /**
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         * ì¤‘ê°„ ë°°ë„ˆ ë Œë”ë§
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         */
        async function renderMiddleBanner() {
            const container = document.getElementById('middle-banner');
            
            container.innerHTML = `
                <a href="#" class="banner-link">
                    <img src="https://via.placeholder.com/860x300/f0f0f0/666666?text=ì¤‘ê°„+í”„ë¡œëª¨ì…˜+ë°°ë„ˆ" 
                         alt="ì¤‘ê°„ ë°°ë„ˆ"
                         loading="lazy">
                </a>
            `;
            
            console.log('âœ… ì¤‘ê°„ ë°°ë„ˆ ë Œë”ë§ ì™„ë£Œ');
        }

        /**
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         * í•˜ë‹¨ í”„ë¡œëª¨ì…˜ ë Œë”ë§
         * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         */
        async function renderBottomPromos() {
            const container = document.getElementById('bottom-promos');
            
            // 2x2 ê·¸ë¦¬ë“œ (4ê°œ)
            const promos = [
                { title: 'í”„ë¡œëª¨ì…˜ 1', link: '#' },
                { title: 'í”„ë¡œëª¨ì…˜ 2', link: '#' },
                { title: 'í”„ë¡œëª¨ì…˜ 3', link: '#' },
                { title: 'í”„ë¡œëª¨ì…˜ 4', link: '#' }
            ];
            
            container.innerHTML = '';
            
            promos.forEach(promo => {
                const promoItem = document.createElement('div');
                promoItem.className = 'promo-item';
                promoItem.innerHTML = `
                    <a href="${promo.link}">
                        <img src="https://via.placeholder.com/400x400/e5e5e5/666666?text=${encodeURIComponent(promo.title)}" 
                             alt="${promo.title}"
                             loading="lazy">
                    </a>
                `;
                container.appendChild(promoItem);
            });
            
            console.log('âœ… í•˜ë‹¨ í”„ë¡œëª¨ì…˜ ë Œë”ë§ ì™„ë£Œ');
        }
    </script>
</body>
</html>